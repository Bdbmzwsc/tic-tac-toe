!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,n){return c=s()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&u(o,n.prototype),o},c.apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},l(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function h(t){var e=s();return function(){var n,r=a(t);if(e){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function w(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function g(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n}var k,S,A,C,E,x,P,O=function(){function n(){e(this,n),this.activeEffects=[],this.onChange=null,this.isSetting=!1,this.actualState=void 0}return r(n,[{key:"getTrackableObject",value:function(e,n){for(var r in e)e[r]&&"object"===t(e[r])&&(e[r]=this.getTrackableObject(e[r],n));var o=this,i=new Proxy(e,{get:function(t,e,r){var o=Reflect.get(t,e,r);return n.onGet(t,e,r),o},set:function(e,r,i,a){"object"===t(i)&&(i=o.getTrackableObject(i,n));var u=Reflect.set(e,r,i,a);return n.onSet(e,r,i,a),u},deleteProperty:function(t,e){var r=Reflect.deleteProperty(t,e);return n.onDeleteProperty(t,e),r}});return Array.isArray(e)&&Object.setPrototypeOf(i,Array.prototype),i}},{key:"build",value:function(t){var e=this,n=this,r=function t(){e.isSetting?setTimeout(t,2):e.onChange&&e.onChange()};return this.actualState=this.getTrackableObject(t,{onGet:function(){},onSet:function(){n.isSetting||(n.isSetting=!0,r()),n.isSetting=!1},onDeleteProperty:function(){}}),this.actualState}},{key:"onStateChange",value:function(t){this.onChange=t,t()}}]),n}(),j=function(t){return HTMLCollection.prototype.isPrototypeOf(t)||NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)},T=function(t,e,n,r){return window.componentMap||(window.componentMap=new WeakMap),!r&&window.componentMap.get(e)||(customElements.define(t,e,n),window.componentMap.set(e,t)),e},M={className:"class"},N=function(t){return!1===t||null==t},R=function t(e,n){if(j(n)){var r,o=m(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;N(i)||(Array.isArray(i)?t(e,i):e.append(i))}}catch(t){o.e(t)}finally{o.f()}}else e.append(n)},L=new WeakMap,_=[{name:"value",attr:"value"}],I=new Map,W=function(t){return t.nodeType===Node.ELEMENT_NODE},U=function(t){return!0===t.isLeafComponent},q=function(t){return t.nodeType===Node.TEXT_NODE},D=function(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t},H=function(t,e,n){var r;if("string"!=typeof t){var o=null===(r=window.componentMap)||void 0===r?void 0:r.get(t);if(!o)throw new Error("Unable to fetch component from registery.");t=o}var i=document.createElement(t),a=new Set;for(var u in e){var s=e[u];if(u.startsWith("on")){var c=u.substring(2).toLowerCase();a.add({name:c,handler:s}),i.addEventListener(c,s)}else U(i)&&(i.props[u]=s,!D(s))||!1!==s&&null!=s&&(u in M?i.setAttribute(M[u],s.toString()):i.setAttribute(u,s.toString()))}return L.set(i,a),n&&R(i,n),i},X=function(t,e,n){return void 0===e?H(t):function(t){return void 0!==t.nodeType||"string"==typeof t||"number"==typeof t}(e)||j(e)?H(t,n,e):H(t,e)},z=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return r?X(t,r,null!=e?e:{}):X(t,null!=e?e:{})},B=function(t){if(L.has(t))return L.get(t)},F=function(t,e){t.forEach((function(t){e.appendChild(t)}))},G=function t(e,n,r,o){if(r){var i,a,u=e.length,s=n.length;if(W(r)&&W(o)){var c=B(r),l=B(o);null==c||c.forEach((function(t){r.removeEventListener(t.name,t.handler)})),null==l||l.forEach((function(t){r.addEventListener(t.name,t.handler)})),i=r,a=l,L.set(i,a||new Set),function(t){L.delete(t)}(o)}for(var f=0,p=0;Math.max(f,p)<Math.min(u,s);f++,p++){var h=e[f],d=n[p];if(W(h)&&h.hasAttribute("leaf-preserve")&&(h=e[++f],u--),U(h)&&(h.isUpdating=!0),U(d)&&(d.isUpdating=!0),W(h)&&W(d)){var y,v=Array.prototype.slice.call(h.attributes),b=m(Array.prototype.slice.call(d.attributes));try{for(b.s();!(y=b.n()).done;){var w=y.value;if(D(w.value)&&h.getAttribute(w.name)!==w.value&&!1!==w.value&&null!==w.value&&void 0!==w.value){h.setAttribute(w.name,w.value);var g,k=m(_);try{for(k.s();!(g=k.n()).done;){var S=g.value;S.name===w.name&&(h[S.name]=w.value)}}catch(t){k.e(t)}finally{k.f()}}}}catch(t){b.e(t)}finally{b.f()}var A,C=m(v);try{for(C.s();!(A=C.n()).done;){var E=A.value;d.hasAttribute(E.name)||h.removeAttribute(E.name)}}catch(t){C.e(t)}finally{C.f()}}if(W(h)&&W(d)&&h.tagName!==d.tagName){var x=h.previousSibling;if(h.outerHTML=h.outerHTML.replace(new RegExp("<".concat(h.tagName.toLowerCase(),"(.*?)"),"g"),"<".concat(d.tagName.toLowerCase(),"$1")).replace(new RegExp("</".concat(h.tagName.toLowerCase(),"(.*?)"),"g"),"</".concat(d.tagName.toLowerCase(),"$1")),h=x?x.nextSibling:r.firstChild,!W(h))continue;U(h)&&(h.isUpdating=!0)}if(U(h)&&U(d)){var P,O=m(d.attributes);try{for(O.s();!(P=O.n()).done;){var j=P.value;j.name in d.props||(h.props[j.name]=j.value)}}catch(t){O.e(t)}finally{O.f()}for(var T in d.props)h.props[T]=d.props[T];for(var M in h.props)M in d.props||d.hasAttribute(M)||delete h.props[M]}if(q(h)&&q(d)){if(h.textContent===d.textContent)continue;r.replaceChild(d,h)}else q(h)&&W(d)&&(r.replaceChild(d,h),U(h=d)&&(h.isUpdating=!0)),W(h)&&q(d)?r.replaceChild(d,h):(t(Array.from(h.childNodes),Array.from(d.childNodes),h,d),U(h)&&(h.isUpdating=!1,h.rerender()))}s>u?n.slice(u).forEach((function(t){t.nodeType!==Node.TEXT_NODE?F([t],r):r.appendChild(t)})):s<u&&e.slice(s).forEach((function(t){r.removeChild(t)}))}},$=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o="",i=0;return t.forEach((function(t){o+=t+n[i++]})),o},J=function(t){i(o,t);var n=h(o);function o(){var t;e(this,o),t=n.call(this),k.set(f(t),null),S.set(f(t),null),A.set(f(t),null),C.set(f(t),null),E.set(f(t),void 0),x.set(f(t),!1),P.set(f(t),null),t.props={},t.isLeafComponent=!0,t.isUpdating=!1;var r,i={},a=m(t.constructor.observedAttributes);try{for(a.s();!(r=a.n()).done;)i[r.value]=null}catch(t){a.e(t)}finally{a.f()}var u=f(t),s=function(e,n){if(!Array.isArray(t.constructor.watchedProps)&&e in t.constructor.watchedProps&&null!=n&&!t.isUpdating&&t.constructor.observedAttributes.includes(e)&&t.constructor.watchedProps[e]!==n.constructor)throw new TypeError("Types of property '".concat(e,"' unmatch: expected ").concat(t.constructor.watchedProps[e].name,", got ").concat(n.constructor.name))},c={name:"",value:null};return t.props=new Proxy(i,{get:function(t,e,n){return s(e),Reflect.get(t,e,n)},set:function(t,e,n,r){s(e,n);var o=Reflect.set(t,e,n,r);return!w(u,x,"f")||"key"===e||c.name===e&&c.value===n||(u.onPropChange(e,n),c.name=e,c.value=n),w(u,x,"f")&&u.rerender(),o},has:function(t,e){return u.constructor.observedAttributes.includes(e)},deleteProperty:function(t,e){return s(e),Reflect.deleteProperty(t,e)}}),t}return r(o,[{key:"setState",value:function(t){g(this,k,t,"f")}},{key:"getState",value:function(){return w(this,x,"f")?w(this,k,"f"):{}}},{key:"state",get:function(){return this.getState()},set:function(t){this.setState(t)}},{key:"listeners",get:function(){return Array.from(B(this)||[])}},{key:"fireEvent",value:function(t,e){if(t instanceof Event)return t.stopPropagation(),this.fireEvent(t.type,e);var n=new CustomEvent(t,{detail:e});return this.dispatchEvent(n)}},{key:"rerender",value:function(){var t;if(w(this,C,"f")&&!this.isUpdating&&w(this,x,"f")&&!(null===(t=w(this,S,"f"))||void 0===t?void 0:t.isSetting)){w(this,S,"f")&&(w(this,S,"f").isSetting=!0),w(this,A,"f")?this.onRerender():this.onMounted(),w(this,P,"f")&&(w(this,P,"f").textContent=this.css());var e=this.render();if(Array.isArray(e)||(e=[e]),w(this,S,"f")&&(w(this,S,"f").isSetting=!1),!w(this,A,"f"))return F(e,w(this,C,"f")),void g(this,A,e,"f");G(Array.from(w(this,C,"f").childNodes),Array.from(e),w(this,C,"f"),e[0]),g(this,A,e,"f")}}},{key:"onMounted",value:function(){}},{key:"onRerender",value:function(){}},{key:"onPropChange",value:function(t,e){}},{key:"connectedCallback",value:function(){var t,e,n,r,o=this;g(this,x,!0,"f"),g(this,C,this.attachShadow({mode:"closed"}),"f"),g(this,P,X("style"),"f"),w(this,P,"f").textContent=this.css(),w(this,P,"f").setAttribute("leaf-preserve","true"),w(this,C,"f").appendChild(w(this,P,"f"));var i=I.get(w(this,E,"f")||"");g(this,S,i||new O,"f"),(null===(t=w(this,S,"f"))||void 0===t?void 0:t.actualState)?g(this,k,w(this,S,"f").actualState,"f"):g(this,k,null===(e=w(this,S,"f"))||void 0===e?void 0:e.build(null!==(n=w(this,k,"f"))&&void 0!==n?n:{}),"f"),w(this,S,"f")&&w(this,E,"f")&&I.set(w(this,E,"f"),w(this,S,"f")),null===(r=w(this,S,"f"))||void 0===r||r.onStateChange((function(){return o.rerender()}))}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&("key"===t&&g(this,E,n,"f"),Array.isArray(this.constructor.watchedProps)?this.props[t]=n:this.constructor.watchedProps[t]===Number?this.props[t]=parseFloat(n):this.props[t]=n)}},{key:"render",value:function(){throw new Error("Render function of `LeafComponent` must be overrided.")}},{key:"css",value:function(){return""}}],[{key:"observedAttributes",get:function(){var t,e=[];if(Array.isArray(this.watchedProps))e.push.apply(e,function(t){if(Array.isArray(t))return b(t)}(t=this.watchedProps)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());else for(var n in this.watchedProps)e.push(n);return[].concat(e,["key"])}}]),o}(l(HTMLElement));k=new WeakMap,S=new WeakMap,A=new WeakMap,C=new WeakMap,E=new WeakMap,x=new WeakMap,P=new WeakMap,J.watchedProps=[];var K,Q,V="#6366f1",Y="#14b8a6",Z=function(t){i(o,t);var n=h(o);function o(){return e(this,o),n.call(this)}return r(o,[{key:"render",value:function(){var t=this;return z("button",{onClick:function(e){return t.fireEvent(e)}})}},{key:"css",value:function(){return $(K||(K=d(["button{padding:5px 10px;background-color:transparent;border:1px solid ",";border-radius:5px;transition:all .1s}button:hover{background-color:",";color:#fff;cursor:pointer}button:focus{box-shadow:0 0 0 2px ",";border-color:","}"])),V,V,Y,Y)}}]),o}(J);T("leaf-button",Z);var tt,et=function(t){i(o,t);var n=h(o);function o(){return e(this,o),n.call(this)}return r(o,[{key:"onMounted",value:function(){var t;this.state.counter=null!==(t=this.props.count)&&void 0!==t?t:0}},{key:"render",value:function(){var t=this;return z("div",null,z(Z,{onClick:function(){return t.state.counter++}},"+"),z("span",{className:"counter"},this.state.counter),z(Z,{onClick:function(){return t.state.counter--}},"-"))}},{key:"css",value:function(){return $(Q||(Q=d([".counter{margin:0 10px}"])))}}]),o}(J);o(et,"watchedProps",["count"]),T("leaf-counter",et);var nt,rt=function(t){i(o,t);var n=h(o);function o(){return e(this,o),n.call(this)}return r(o,[{key:"render",value:function(){return z("div",null,this.props.links.map((function(t){return z("div",{className:"link",onClick:function(){return window.open(t.link)}},z("h3",null,t.title),z("p",null,t.description))})))}},{key:"css",value:function(){return $(tt||(tt=d([".link{padding:10px 30px;border:1px solid #eee;border-radius:10px;transition:all .2s;margin-bottom:20px}.link:hover{cursor:pointer;border-color:","}"])),V)}}]),o}(J);o(rt,"watchedProps",["links"]),T("leaf-resources",rt),function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}("body {\n  margin: 0px;\n  padding: 0px;\n  overflow: hidden;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n}\n");var ot=function(t){i(o,t);var n=h(o);function o(){return e(this,o),n.call(this)}return r(o,[{key:"render",value:function(){var t=this;return z("button",{onClick:function(){return t.props.onClick()}},this.props.value)}},{key:"css",value:function(){return $(nt||(nt=d(["button{width:100px;height:100px}"])))}}]),o}(J);T("leaf-square",ot),T("my-app",function(t){i(o,t);var n=h(o);function o(){var t;return e(this,o),(t=n.call(this)).links=[{title:"Documentation",description:"Leafjs official documentation.",link:"https://leafjs.samzhangjy.com"},{title:"GitHub",description:"Found a bug? Report an issue to us!",link:"https://github.com/samzhangjy/leafjs"}],t.state={squars:Array(9).fill(null),Isx:!0},t}return r(o,[{key:"calculate_winner",value:function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n++){var r=y(e[n],3),o=r[0],i=r[1],a=r[2];if(t[o]&&t[o]==t[i]&&t[o]==t[a])return t[o]}return null}},{key:"handleClick",value:function(t){var e=this.state.squars.slice();if(this.state.Isx){if(this.calculate_winner(this.state.squars))return;e[t]="X",this.state.Isx=!1}else{if(this.calculate_winner(this.state.squars))return;e[t]="O",this.state.Isx=!0}this.state.squars=e}},{key:"renderSpuare",value:function(t){var e=this;return z(ot,{value:this.state.squars[t],onClick:function(){return e.handleClick(t)}})}},{key:"render",value:function(){var t=this.calculate_winner(this.state.squars),e=(this.state.Isx,"X");return t?e="Winner is "+t:(e="Next player is ".concat(this.state.Isx?"X":"O"),console.log(e)),console.log(t),z("div",null,e,z("br",null),this.renderSpuare(0),this.renderSpuare(1),this.renderSpuare(2),z("br",null),this.renderSpuare(3),this.renderSpuare(4),this.renderSpuare(5),z("br",null),this.renderSpuare(6),this.renderSpuare(7),this.renderSpuare(8))}}]),o}(J))}();
